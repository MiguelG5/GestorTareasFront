{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport Swal from 'sweetalert2';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"src/app/services/login.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/material/button\";\nimport * as i6 from \"@angular/material/form-field\";\nimport * as i7 from \"@angular/material/icon\";\n\nfunction RegisterComponent_div_17_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"p\", 32)(2, \"span\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const validacion_r5 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(validacion_r5.message);\n  }\n}\n\nfunction RegisterComponent_div_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, RegisterComponent_div_17_ng_container_1_Template, 4, 1, \"ng-container\", 31);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const validacion_r5 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", (ctx_r0.username == null ? null : ctx_r0.username.hasError(validacion_r5.type)) && ((ctx_r0.username == null ? null : ctx_r0.username.dirty) || (ctx_r0.username == null ? null : ctx_r0.username.touched)));\n  }\n}\n\nfunction RegisterComponent_div_24_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"p\", 32)(2, \"span\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const validacion_r8 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(validacion_r8.message);\n  }\n}\n\nfunction RegisterComponent_div_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, RegisterComponent_div_24_ng_container_1_Template, 4, 1, \"ng-container\", 31);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const validacion_r8 = ctx.$implicit;\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", (ctx_r1.email == null ? null : ctx_r1.email.hasError(validacion_r8.type)) && ((ctx_r1.email == null ? null : ctx_r1.email.dirty) || (ctx_r1.email == null ? null : ctx_r1.email.touched)));\n  }\n}\n\nfunction RegisterComponent_div_34_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"p\", 32)(2, \"span\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const validacion_r11 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(validacion_r11.message);\n  }\n}\n\nfunction RegisterComponent_div_34_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, RegisterComponent_div_34_ng_container_1_Template, 4, 1, \"ng-container\", 31);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const validacion_r11 = ctx.$implicit;\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", (ctx_r2.password == null ? null : ctx_r2.password.hasError(validacion_r11.type)) && ((ctx_r2.password == null ? null : ctx_r2.password.dirty) || (ctx_r2.password == null ? null : ctx_r2.password.touched)));\n  }\n}\n\nfunction RegisterComponent_div_41_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"p\", 32)(2, \"span\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const validacion_r14 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(validacion_r14.message);\n  }\n}\n\nfunction RegisterComponent_div_41_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, RegisterComponent_div_41_ng_container_1_Template, 4, 1, \"ng-container\", 31);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const validacion_r14 = ctx.$implicit;\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", (ctx_r3.repeatPassword == null ? null : ctx_r3.repeatPassword.hasError(validacion_r14.type)) && ((ctx_r3.repeatPassword == null ? null : ctx_r3.repeatPassword.dirty) || (ctx_r3.repeatPassword == null ? null : ctx_r3.repeatPassword.touched)));\n  }\n}\n\nfunction RegisterComponent_div_48_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"p\", 32)(2, \"span\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const validacion_r17 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(validacion_r17.message);\n  }\n}\n\nfunction RegisterComponent_div_48_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, RegisterComponent_div_48_ng_container_1_Template, 4, 1, \"ng-container\", 31);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const validacion_r17 = ctx.$implicit;\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", (ctx_r4.aceptarTerminos == null ? null : ctx_r4.aceptarTerminos.hasError(validacion_r17.type)) && ((ctx_r4.aceptarTerminos == null ? null : ctx_r4.aceptarTerminos.dirty) || (ctx_r4.aceptarTerminos == null ? null : ctx_r4.aceptarTerminos.touched)));\n  }\n}\n\nexport let RegisterComponent = /*#__PURE__*/(() => {\n  class RegisterComponent {\n    constructor(fb, loginService, router) {\n      this.fb = fb;\n      this.loginService = loginService;\n      this.router = router;\n      this.hide = true;\n      this.validaciones = {\n        username: [{\n          type: 'required',\n          message: 'El nombre de usuario es requerido'\n        }],\n        email: [{\n          type: 'required',\n          message: 'El correo electrónico es requerido'\n        }, {\n          type: 'email',\n          message: 'Este no es un correo valido'\n        }],\n        password: [{\n          type: 'required',\n          message: 'La contraseña es requerida'\n        }, {\n          type: 'pattern',\n          message: 'Este campo debe contener mayusculas, minusculas, numeros y caracteres especiales'\n        }, {\n          type: 'minlength',\n          message: 'El mínimo de caracteres es 8'\n        }],\n        repeatPassword: [{\n          type: 'required',\n          message: 'El campo es requerido'\n        }, {\n          type: 'passwordMismatch',\n          message: 'Las contraseñas no coinciden'\n        }],\n        aceptarTerminos: [{\n          type: 'required',\n          message: 'Debes aceptar los Términos y Condiciones'\n        }]\n      };\n      this.registerForm = this.fb.group({\n        username: ['', Validators.required],\n        email: ['', [Validators.required, Validators.email]],\n        password: ['', [Validators.required, Validators.pattern(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[@$!%*?&])[A-Za-z\\d@$!%*?&]+$/), Validators.minLength(8)]],\n        repeatPassword: ['', Validators.required],\n        aceptarTerminos: [false, [Validators.requiredTrue]]\n      }, {\n        validator: this.passwordMatchValidator('password', 'repeatPassword')\n      });\n    }\n\n    register() {\n      var _a, _b, _c, _d;\n\n      if (!this.registerForm.valid) {\n        this.markAllAsDirty();\n        return;\n      }\n\n      let rol = 'user';\n      const email = (_a = this.registerForm.get('email')) === null || _a === void 0 ? void 0 : _a.value;\n\n      if (email.endsWith('hotmail.com') || email.endsWith('outlook.com')) {\n        rol = 'admin';\n      }\n\n      let data = {\n        username: (_b = this.registerForm.get('username')) === null || _b === void 0 ? void 0 : _b.value,\n        email: (_c = this.registerForm.get('email')) === null || _c === void 0 ? void 0 : _c.value,\n        password: (_d = this.registerForm.get('password')) === null || _d === void 0 ? void 0 : _d.value,\n        role: rol\n      };\n      this.loginService.register(data).subscribe(resp => {\n        Swal.fire({\n          title: '!Cuenta creada con exito¡',\n          text: resp.message,\n          icon: 'success',\n          backdrop: false,\n          timer: 2000,\n          showConfirmButton: false\n        }).then(() => {\n          this.router.navigate(['/login']);\n        });\n        console.log(resp.message);\n      }, err => {\n        Swal.fire({\n          title: 'Ocurrió un error en el sistema',\n          text: err.error.message,\n          icon: 'error',\n          backdrop: false,\n          timer: 2000,\n          showConfirmButton: false\n        });\n        console.error(err);\n      });\n    }\n\n    passwordMatchValidator(controlName, matchingControlName) {\n      return formGroup => {\n        const control = formGroup.get(controlName);\n        const matchingControl = formGroup.get(matchingControlName);\n\n        if ((matchingControl === null || matchingControl === void 0 ? void 0 : matchingControl.value) == null || (matchingControl === null || matchingControl === void 0 ? void 0 : matchingControl.value) == '') {\n          matchingControl === null || matchingControl === void 0 ? void 0 : matchingControl.setErrors({\n            required: true\n          });\n          return {\n            required: true\n          };\n        } else if (control && matchingControl && control.value !== matchingControl.value) {\n          matchingControl.setErrors({\n            passwordMismatch: true\n          });\n          return {\n            passwordMismatch: true\n          };\n        } else {\n          matchingControl === null || matchingControl === void 0 ? void 0 : matchingControl.setErrors(null);\n          return null;\n        }\n      };\n    }\n\n    get username() {\n      return this.registerForm.get('username');\n    }\n\n    get email() {\n      return this.registerForm.get('email');\n    }\n\n    get password() {\n      return this.registerForm.get('password');\n    }\n\n    get repeatPassword() {\n      return this.registerForm.get('repeatPassword');\n    }\n\n    get aceptarTerminos() {\n      return this.registerForm.get('aceptarTerminos');\n    }\n\n    markAllAsDirty() {\n      Object.keys(this.registerForm.controls).forEach(controlName => {\n        const control = this.registerForm.get(controlName);\n        control === null || control === void 0 ? void 0 : control.markAsTouched();\n      });\n    }\n\n  }\n\n  RegisterComponent.ɵfac = function RegisterComponent_Factory(t) {\n    return new (t || RegisterComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.LoginService), i0.ɵɵdirectiveInject(i3.Router));\n  };\n\n  RegisterComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: RegisterComponent,\n    selectors: [[\"app-register\"]],\n    decls: 52,\n    vars: 11,\n    consts: [[1, \"p-5\"], [1, \"container\", \"h-100\", \"w-100\"], [1, \"row\", \"d-flex\", \"justify-content-center\", \"align-items-center\", \"h-100\"], [1, \"col-lg-12\", \"col-xl-11\"], [1, \"card\", \"text-black\", 2, \"border-radius\", \"25px\"], [1, \"card-body\", \"p-md-5\"], [1, \"row\", \"justify-content-center\"], [1, \"col-md-0\", \"col-lg-12\", \"col-xl-10\", \"offset-xl-0\"], [1, \"mx-1\", \"mx-md-4\", 3, \"formGroup\", \"submit\"], [1, \"d-flex\", \"flex-row\", \"align-items-center\", \"mb-4\"], [1, \"fas\", \"fa-user\", \"fa-lg\", \"me-3\", \"fa-fw\"], [\"data-mdb-input-init\", \"\", 1, \"form-outline\", \"flex-fill\", \"mb-0\"], [\"formControlName\", \"username\", \"type\", \"text\", \"id\", \"form3Example1c\", 1, \"form-control\"], [\"for\", \"form3Example1c\", 1, \"form-label\"], [4, \"ngFor\", \"ngForOf\"], [1, \"fas\", \"fa-envelope\", \"fa-lg\", \"me-3\", \"fa-fw\"], [\"formControlName\", \"email\", \"type\", \"email\", \"id\", \"form3Example3c\", 1, \"form-control\"], [\"for\", \"form3Example3c\", 1, \"form-label\"], [1, \"fas\", \"fa-lock\", \"fa-lg\", \"me-3\", \"fa-fw\"], [\"formControlName\", \"password\", \"id\", \"form3Example4c\", 1, \"form-control\", 3, \"type\"], [\"mat-icon-button\", \"\", \"matSuffix\", \"\", 3, \"click\"], [\"for\", \"form3Example4c\", 1, \"form-label\"], [1, \"fas\", \"fa-key\", \"fa-lg\", \"me-3\", \"fa-fw\"], [\"formControlName\", \"repeatPassword\", \"id\", \"form3Example4cd\", 1, \"form-control\", 3, \"type\"], [\"for\", \"form3Example4cd\", 1, \"form-label\"], [1, \"form-check\", \"d-flex\", \"justify-content-center\", \"mb-5\"], [\"formControlName\", \"aceptarTerminos\", \"type\", \"checkbox\", \"value\", \"\", \"id\", \"form2Example3c\", 1, \"form-check-input\", \"me-2\"], [\"for\", \"form2Example3\", 1, \"form-check-label\"], [\"href\", \"/condiciones\"], [1, \"d-flex\", \"justify-content-center\", \"mx-4\", \"mb-3\", \"mb-lg-4\"], [\"type\", \"submit\", \"data-mdb-button-init\", \"\", \"data-mdb-ripple-init\", \"\", 1, \"btn\", \"btn-primary\", \"btn-lg\"], [4, \"ngIf\"], [\"id\", \"nombreError\", 1, \"text-danger\", \"fw-bold\"]],\n    template: function RegisterComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"section\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"div\", 4)(5, \"div\", 5)(6, \"div\", 6)(7, \"div\", 7)(8, \"h5\");\n        i0.ɵɵtext(9, \"Crear Cuenta\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(10, \"form\", 8);\n        i0.ɵɵlistener(\"submit\", function RegisterComponent_Template_form_submit_10_listener() {\n          return ctx.register();\n        });\n        i0.ɵɵelementStart(11, \"div\", 9);\n        i0.ɵɵelement(12, \"i\", 10);\n        i0.ɵɵelementStart(13, \"div\", 11);\n        i0.ɵɵelement(14, \"input\", 12);\n        i0.ɵɵelementStart(15, \"label\", 13);\n        i0.ɵɵtext(16, \"Nombre de Usuario\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵtemplate(17, RegisterComponent_div_17_Template, 2, 1, \"div\", 14);\n        i0.ɵɵelementStart(18, \"div\", 9);\n        i0.ɵɵelement(19, \"i\", 15);\n        i0.ɵɵelementStart(20, \"div\", 11);\n        i0.ɵɵelement(21, \"input\", 16);\n        i0.ɵɵelementStart(22, \"label\", 17);\n        i0.ɵɵtext(23, \"Correo electr\\u00F3nico\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵtemplate(24, RegisterComponent_div_24_Template, 2, 1, \"div\", 14);\n        i0.ɵɵelementStart(25, \"div\", 9);\n        i0.ɵɵelement(26, \"i\", 18);\n        i0.ɵɵelementStart(27, \"div\", 11);\n        i0.ɵɵelement(28, \"input\", 19);\n        i0.ɵɵelementStart(29, \"button\", 20);\n        i0.ɵɵlistener(\"click\", function RegisterComponent_Template_button_click_29_listener() {\n          return ctx.hide = !ctx.hide;\n        });\n        i0.ɵɵelementStart(30, \"mat-icon\");\n        i0.ɵɵtext(31);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(32, \"label\", 21);\n        i0.ɵɵtext(33, \"Contrase\\u00F1a\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵtemplate(34, RegisterComponent_div_34_Template, 2, 1, \"div\", 14);\n        i0.ɵɵelementStart(35, \"div\", 9);\n        i0.ɵɵelement(36, \"i\", 22);\n        i0.ɵɵelementStart(37, \"div\", 11);\n        i0.ɵɵelement(38, \"input\", 23);\n        i0.ɵɵelementStart(39, \"label\", 24);\n        i0.ɵɵtext(40, \"Repetir Contrase\\u00F1a\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵtemplate(41, RegisterComponent_div_41_Template, 2, 1, \"div\", 14);\n        i0.ɵɵelementStart(42, \"div\", 25);\n        i0.ɵɵelement(43, \"input\", 26);\n        i0.ɵɵelementStart(44, \"label\", 27);\n        i0.ɵɵtext(45, \" Acepto los \");\n        i0.ɵɵelementStart(46, \"a\", 28);\n        i0.ɵɵtext(47, \"Terminos & Condiciones\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵtemplate(48, RegisterComponent_div_48_Template, 2, 1, \"div\", 14);\n        i0.ɵɵelementStart(49, \"div\", 29)(50, \"button\", 30);\n        i0.ɵɵtext(51, \" Crear Cuenta \");\n        i0.ɵɵelementEnd()()()()()()()()()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(10);\n        i0.ɵɵproperty(\"formGroup\", ctx.registerForm);\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"ngForOf\", ctx.validaciones.username);\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"ngForOf\", ctx.validaciones.email);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"type\", ctx.hide ? \"password\" : \"text\");\n        i0.ɵɵadvance(1);\n        i0.ɵɵattribute(\"aria-label\", \"Hide password\")(\"aria-pressed\", ctx.hide);\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate(ctx.hide ? \"visibility_off\" : \"visibility\");\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngForOf\", ctx.validaciones.password);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"type\", ctx.hide ? \"password\" : \"text\");\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngForOf\", ctx.validaciones.repeatPassword);\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"ngForOf\", ctx.validaciones.aceptarTerminos);\n      }\n    },\n    directives: [i1.ɵNgNoValidate, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.DefaultValueAccessor, i1.NgControlStatus, i1.FormControlName, i4.NgForOf, i4.NgIf, i5.MatButton, i6.MatSuffix, i7.MatIcon, i1.CheckboxControlValueAccessor],\n    styles: [\".container[_ngcontent-%COMP%]{width:40%}h5[_ngcontent-%COMP%]{font-size:40px;text-align:center;font-family:initial}\"]\n  });\n  return RegisterComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}